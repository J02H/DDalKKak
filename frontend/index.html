<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë”¸ê¹ (DDalKKak) - ê±´êµ­ëŒ€ ê¸€ë¡œì»¬ìº í¼ìŠ¤ ê³µì§€ì‚¬í•­</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f8f9fa; }
        
        /* í—¤ë” */
        .header { background: #036B3F; padding: 16px 24px; display: flex; justify-content: space-between; align-items: center; }
        .logo { display: flex; align-items: center; background: rgba(255,255,255,0.1); padding: 12px; border-radius: 12px; cursor: pointer; transition: all 0.2s; }
        .logo:hover { background: rgba(255,255,255,0.2); }
        .logo img { height: 60px; width: auto; }
        
        /* ê²€ìƒ‰ì°½ */
        .search-box { display: flex; align-items: center; gap: 8px; }
        .search-box input { padding: 12px 20px; width: 350px; border: none; border-radius: 25px; font-size: 16px; background: rgba(255,255,255,0.9); }
        .search-box input:focus { outline: none; background: white; }
        .search-box button { padding: 12px 20px; background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); border-radius: 25px; cursor: pointer; font-weight: 600; transition: all 0.2s; }
        .search-box button:hover { background: rgba(255,255,255,0.3); }
        
        /* ì‚¬ìš©ì ë©”ë‰´ */
        .user-menu { display: flex; align-items: center; gap: 12px; }
        .user-info { color: white; font-weight: 600; }
        .auth-btn { padding: 8px 16px; background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); border-radius: 20px; cursor: pointer; font-weight: 600; transition: all 0.2s; text-decoration: none; }
        .auth-btn:hover { background: rgba(255,255,255,0.3); }
        
        /* ë¡œê·¸ì¸ ëª¨ë‹¬ */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; }
        .modal-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 32px; border-radius: 16px; width: 400px; max-width: 90vw; }
        .modal h2 { margin-bottom: 24px; color: #036B3F; text-align: center; }
        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; margin-bottom: 8px; color: #495057; font-weight: 600; }
        .form-group input, .form-group select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: #036B3F; }
        .form-buttons { display: flex; gap: 12px; margin-top: 24px; }
        .form-buttons button { flex: 1; padding: 12px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .btn-primary { background: #036B3F; color: white; }
        .btn-primary:hover { background: #025a33; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #5a6268; }
        .error-message { color: #dc3545; font-size: 14px; margin-top: 8px; }
        
        /* ì»¨í…Œì´ë„ˆ */
        .container { max-width: 1200px; margin: 0 auto; padding: 24px; }
        
        /* ì¹´í…Œê³ ë¦¬ íƒ­ */
        .category-tabs { background: white; border-radius: 16px; padding: 6px; margin-bottom: 24px; display: flex; gap: 4px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .tab { padding: 14px 24px; border-radius: 12px; cursor: pointer; transition: all 0.3s; color: #6c757d; font-weight: 600; font-size: 14px; }
        .tab.active { background: #036B3F; color: white; box-shadow: 0 2px 8px rgba(3,107,63,0.3); }
        .tab:hover:not(.active) { background: #f8f9fa; color: #036B3F; }
        
        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content { background: white; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); overflow: hidden; }
        
        /* ì‚¬ì´ë“œë°” */
        .sidebar { position: fixed; right: 24px; top: 50%; transform: translateY(-50%); background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); width: 220px; }
        .sidebar h3 { margin-bottom: 20px; color: #212529; font-weight: 700; }
        .sidebar-item { padding: 12px 16px; color: #6c757d; cursor: pointer; transition: all 0.2s; border-radius: 8px; margin-bottom: 4px; }
        .sidebar-item:hover { color: #036B3F; background: #f8f9fa; }
        
        /* í…Œì´ë¸” */
        .table-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        .table-header { background: #f8f9fa; }
        .table-header th { padding: 20px 24px; text-align: left; font-weight: 700; color: #495057; font-size: 14px; border-bottom: 2px solid #e9ecef; }
        .table-header .views { text-align: center; }
        .table-row { border-bottom: 1px solid #f1f3f4; transition: all 0.2s; cursor: pointer; }
        .table-row:hover { background: #f8f9fa; transform: translateY(-1px); }
        .table-row td { padding: 20px 24px; color: #212529; }
        .table-row .title { font-weight: 600; color: #212529; }
        .table-row .author { color: #036B3F; font-size: 14px; font-weight: 500; }
        .table-row .date { color: #6c757d; font-size: 14px; }
        .table-row .views { text-align: center; color: #6c757d; font-size: 14px; font-weight: 600; }
        
        /* í˜ì´ì§€ë„¤ì´ì…˜ */
        .pagination { display: flex; justify-content: center; align-items: center; gap: 8px; padding: 24px; }
        .pagination button { padding: 8px 12px; border: 1px solid #ddd; background: white; color: #495057; border-radius: 6px; cursor: pointer; transition: all 0.2s; }
        .pagination button:hover { background: #f8f9fa; }
        .pagination button.active { background: #036B3F; color: white; border-color: #036B3F; }
        .pagination button:disabled { opacity: 0.5; cursor: not-allowed; }
        .pagination .page-info { color: #6c757d; font-size: 14px; margin: 0 16px; }
        
        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .sidebar { display: none; }
            .container { padding: 16px; }
            .category-tabs { flex-wrap: wrap; }
            .tab { padding: 8px 16px; font-size: 14px; }
        }
        
        .loading { text-align: center; padding: 60px; color: #6c757d; }
        .empty-state { text-align: center; padding: 60px; color: #6c757d; }
        .empty-state h3 { margin-bottom: 8px; }
        
        /* íŒ€ ì†Œê°œ */
        .team-intro { background: white; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); padding: 40px; margin-bottom: 24px; text-align: center; }
        .team-intro .logo-large { width: 300px; height: 180px; margin: 0 auto 32px; }
        .team-intro h2 { color: #036B3F; margin-bottom: 16px; font-size: 28px; }
        .team-intro .subtitle { color: #6c757d; font-size: 18px; margin-bottom: 24px; }
        .team-intro .description { color: #495057; line-height: 1.6; margin-bottom: 32px; max-width: 600px; margin-left: auto; margin-right: auto; }
        .team-members { display: flex; justify-content: center; gap: 32px; flex-wrap: wrap; }
        .member { text-align: center; }
        .member .avatar { width: 60px; height: 60px; background: #036B3F; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 20px; margin: 0 auto 8px; }
        .member .name { font-weight: 600; color: #212529; }
        .member .role { color: #6c757d; font-size: 14px; }
        
        /* ë§ˆì´í˜ì´ì§€ */
        .mypage { padding: 24px; }
        .profile-card { background: white; border-radius: 16px; padding: 32px; margin-bottom: 24px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .profile-header { display: flex; align-items: center; gap: 24px; margin-bottom: 32px; }
        .profile-avatar { width: 80px; height: 80px; background: #036B3F; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 32px; }
        .profile-info h2 { color: #212529; margin-bottom: 8px; }
        .profile-info .subtitle { color: #6c757d; }
        .profile-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 24px; }
        .detail-item .label { color: #6c757d; font-size: 14px; margin-bottom: 4px; }
        .detail-item .value { color: #212529; font-weight: 600; }
        .bookmarks-section { background: white; border-radius: 16px; padding: 32px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .section-header h3 { color: #212529; margin-bottom: 24px; }
        .bookmark-item { display: flex; justify-content: space-between; align-items: center; padding: 16px; border: 1px solid #e9ecef; border-radius: 8px; margin-bottom: 12px; transition: all 0.2s; }
        .bookmark-item:hover { background: #f8f9fa; }
        .bookmark-info .title { font-weight: 600; color: #212529; margin-bottom: 4px; }
        .bookmark-info .meta { color: #6c757d; font-size: 14px; }
        .bookmark-actions { display: flex; gap: 8px; }
        .btn-small { padding: 6px 12px; font-size: 12px; border: none; border-radius: 4px; cursor: pointer; transition: all 0.2s; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-danger:hover { background: #c82333; }
        .btn-link { background: #036B3F; color: white; }
        .btn-link:hover { background: #025a33; }
        .bookmark-btn { transition: all 0.2s; opacity: 0.3; }
        .bookmark-btn:hover { opacity: 1; transform: scale(1.2); }
        .bookmark-btn.bookmarked { opacity: 1; }
    </style>
</head>
<body>
    <!-- í—¤ë” -->
    <div class="header">
        <div class="logo" onclick="loadHome()">
            <img src="images/ddalkkak_logo.png" alt="ë”¸ê¹ ë¡œê³ ">
        </div>
        
        <!-- ê²€ìƒ‰ì°½ -->
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="ê³µì§€ì‚¬í•­ ê²€ìƒ‰..." onkeypress="if(event.key==='Enter') searchNotices()">
            <button onclick="searchNotices()">ê²€ìƒ‰</button>
        </div>
        
        <!-- ì‚¬ìš©ì ë©”ë‰´ -->
        <div class="user-menu" id="userMenu">
            <button class="auth-btn" onclick="showLoginModal()">ë¡œê·¸ì¸</button>
        </div>
    </div>
    
    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="container">
        <!-- ì¹´í…Œê³ ë¦¬ íƒ­ -->
        <div class="category-tabs">
            <div class="tab active" data-category="all">ì „ì²´</div>
            <div class="tab" data-category="í•™ì‚¬ê³µì§€">í•™ì‚¬ê³µì§€</div>
            <div class="tab" data-category="ì¥í•™ê³µì§€">ì¥í•™ê³µì§€</div>
            <div class="tab" data-category="ì±„ìš©ê³µì§€">ì±„ìš©ê³µì§€</div>
            <div class="tab" data-category="ì…í•™ê³µì§€">ì…í•™ê³µì§€</div>
            <div class="tab" data-category="ì¼ë°˜ê³µì§€">ì¼ë°˜ê³µì§€</div>
            <div class="tab" data-category="ì·¨ì—…/ì°½ì—…">ì·¨ì—…/ì°½ì—…</div>
        </div>
        
        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div class="main-content">
            <div id="content">
                <div class="loading">ê³µì§€ì‚¬í•­ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
            </div>
        </div>
    </div>
    
    <!-- ì‚¬ì´ë“œë°” -->
    <div class="sidebar">
        <h3>ë°”ë¡œê°€ê¸°</h3>
        <div class="sidebar-item" onclick="openLink('https://www.kku.ac.kr')">ğŸ« ê±´êµ­ëŒ€ ê¸€ë¡œì»¬</div>
        <div class="sidebar-item" onclick="openLink('https://portal.kku.ac.kr')">ğŸ“š í•™ìƒí¬í„¸</div>
        <div class="sidebar-item" onclick="openLink('https://tls.kku.ac.kr')">ğŸ’» TLS</div>
        <div class="sidebar-item" onclick="openLink('https://library.kku.ac.kr')">ğŸ“– ë„ì„œê´€</div>
    </div>
    
    <!-- ë¡œê·¸ì¸ ëª¨ë‹¬ -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <h2>ë¡œê·¸ì¸</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">ì•„ì´ë””</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <div class="error-message" id="loginError"></div>
                <div class="form-buttons">
                    <button type="button" class="btn-secondary" onclick="hideLoginModal()">ì·¨ì†Œ</button>
                    <button type="submit" class="btn-primary">ë¡œê·¸ì¸</button>
                </div>
            </form>
            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #eee; font-size: 14px; color: #6c757d; text-align: center;">
                <p>ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <a href="#" onclick="showRegisterModal()" style="color: #036B3F; text-decoration: none; font-weight: 600;">íšŒì›ê°€ì…</a></p>
                <div style="margin-top: 12px;">
            </div>
        </div>
    </div>
    
    <!-- íšŒì›ê°€ì… ëª¨ë‹¬ -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <h2>íšŒì›ê°€ì…</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="regUsername">ì•„ì´ë”” *</label>
                    <input type="text" id="regUsername" name="username" required>
                </div>
                <div class="form-group">
                    <label for="regPassword">ë¹„ë°€ë²ˆí˜¸ *</label>
                    <input type="password" id="regPassword" name="password" required>
                </div>
                <div class="form-group">
                    <label for="regName">ì´ë¦„ *</label>
                    <input type="text" id="regName" name="name" required>
                </div>
                <div class="form-group">
                    <label for="regEmail">ì´ë©”ì¼ *</label>
                    <input type="email" id="regEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="regDepartment">í•™ê³¼ *</label>
                    <select id="regDepartment" name="department" required>
                        <option value="">í•™ê³¼ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                        <optgroup label="ë””ìì¸ëŒ€í•™">
                            <option value="ì‚°ì—…ë””ìì¸í•™ê³¼">ì‚°ì—…ë””ìì¸í•™ê³¼</option>
                            <option value="ì‹¤ë‚´ë””ìì¸í•™ê³¼">ì‹¤ë‚´ë””ìì¸í•™ê³¼</option>
                            <option value="íŒ¨ì…˜ë””ìì¸í•™ê³¼">íŒ¨ì…˜ë””ìì¸í•™ê³¼</option>
                            <option value="ì‹œê°ì˜ìƒë””ìì¸í•™ê³¼">ì‹œê°ì˜ìƒë””ìì¸í•™ê³¼</option>
                            <option value="ë¯¸ë””ì–´ì½˜í…ì¸ í•™ê³¼">ë¯¸ë””ì–´ì½˜í…ì¸ í•™ê³¼</option>
                            <option value="ì¡°í˜•ì˜ˆìˆ í•™ê³¼">ì¡°í˜•ì˜ˆìˆ í•™ê³¼</option>
                        </optgroup>
                        <optgroup label="ê³¼í•™ê¸°ìˆ ëŒ€í•™">
                            <option value="ë©”ì¹´íŠ¸ë¡œë‹‰ìŠ¤ê³µí•™ê³¼">ë©”ì¹´íŠ¸ë¡œë‹‰ìŠ¤ê³µí•™ê³¼</option>
                            <option value="ì»´í“¨í„°ê³µí•™ê³¼">ì»´í“¨í„°ê³µí•™ê³¼</option>
                            <option value="ë°”ì´ì˜¤ë©”ë””ì»¬ê³µí•™ê³¼">ë°”ì´ì˜¤ë©”ë””ì»¬ê³µí•™ê³¼</option>
                            <option value="ë…¹ìƒ‰ê¸°ìˆ ìœµí•©í•™ê³¼">ë…¹ìƒ‰ê¸°ìˆ ìœµí•©í•™ê³¼</option>
                            <option value="ì‘ìš©í™”í•™ê³¼">ì‘ìš©í™”í•™ê³¼</option>
                        </optgroup>
                        <optgroup label="ì˜ê³¼ëŒ€í•™">
                            <option value="ì˜ì˜ˆê³¼">ì˜ì˜ˆê³¼</option>
                            <option value="ì˜í•™ê³¼">ì˜í•™ê³¼</option>
                        </optgroup>
                        <optgroup label="ì˜ë£Œìƒëª…ëŒ€í•™">
                            <option value="ê°„í˜¸í•™ê³¼">ê°„í˜¸í•™ê³¼</option>
                            <option value="ë°”ì´ì˜¤ì˜ì•½í•™ê³¼">ë°”ì´ì˜¤ì˜ì•½í•™ê³¼</option>
                            <option value="ìƒëª…ê³µí•™ê³¼">ìƒëª…ê³µí•™ê³¼</option>
                            <option value="ì‹í’ˆì˜ì–‘í•™ê³¼">ì‹í’ˆì˜ì–‘í•™ê³¼</option>
                            <option value="ë·°í‹°í™”ì¥í’ˆí•™ê³¼">ë·°í‹°í™”ì¥í’ˆí•™ê³¼</option>
                            <option value="ìŠ¤í¬ì¸ ê±´ê°•í•™ê³¼">ìŠ¤í¬ì¸ ê±´ê°•í•™ê³¼</option>
                            <option value="ê³¨í”„ì‚°ì—…í•™ê³¼">ê³¨í”„ì‚°ì—…í•™ê³¼</option>
                        </optgroup>
                        <optgroup label="ì¸ë¬¸ì‚¬íšŒìœµí•©ëŒ€í•™">
                            <option value="ê²½ì˜í•™ê³¼">ê²½ì˜í•™ê³¼</option>
                            <option value="ê²½ì œí†µìƒí•™ê³¼">ê²½ì œí†µìƒí•™ê³¼</option>
                            <option value="ê²½ì°°í•™ê³¼">ê²½ì°°í•™ê³¼</option>
                            <option value="ì†Œë°©ë°©ì¬ìœµí•©í•™ê³¼">ì†Œë°©ë°©ì¬ìœµí•©í•™ê³¼</option>
                            <option value="ë¬¸í—Œì •ë³´í•™ê³¼">ë¬¸í—Œì •ë³´í•™ê³¼</option>
                            <option value="ìœ ì•„êµìœ¡ê³¼">ìœ ì•„êµìœ¡ê³¼</option>
                            <option value="ì‚¬íšŒë³µì§€í•™ê³¼">ì‚¬íšŒë³µì§€í•™ê³¼</option>
                            <option value="ì‹ ë¬¸ë°©ì†¡í•™ê³¼">ì‹ ë¬¸ë°©ì†¡í•™ê³¼</option>
                            <option value="ë™í™”.í•œêµ­ì–´ë¬¸í™”í•™ê³¼">ë™í™”.í•œêµ­ì–´ë¬¸í™”í•™ê³¼</option>
                            <option value="ì˜ì–´ë¬¸í™”í•™ê³¼">ì˜ì–´ë¬¸í™”í•™ê³¼</option>
                        </optgroup>
                        <optgroup label="KUììœ ì „ê³µí•™ë¶€">
                            <option value="KUììœ ì „ê³µí•™ë¶€">KUììœ ì „ê³µí•™ë¶€</option>
                        </optgroup>
                    </select>
                </div>
                <div class="form-group">
                    <label for="regStudentId">í•™ë²ˆ</label>
                    <input type="text" id="regStudentId" name="student_id" placeholder="ì˜ˆ: 202012345">
                </div>
                <div class="error-message" id="registerError"></div>
                <div class="form-buttons">
                    <button type="button" class="btn-secondary" onclick="hideRegisterModal()">ì·¨ì†Œ</button>
                    <button type="submit" class="btn-primary">ê°€ì…í•˜ê¸°</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const API_BASE = 'http://3.34.129.253:8001/api';
        let currentCategory = 'all';
        let allNotices = [];
        let currentPage = 1;
        const itemsPerPage = 10;
        let currentUser = null;

        // ì´ˆê¸°í™”
        function init() {
            checkLoginStatus();
            loadHome();
            setupEventListeners();
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupEventListeners() {
            // íƒ­ í´ë¦­
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    currentCategory = tab.dataset.category;
                    currentPage = 1; // íƒ­ ë³€ê²½ì‹œ ì²« í˜ì´ì§€ë¡œ
                    displayNotices(allNotices);
                });
            });
        }

        // í™ˆ í˜ì´ì§€ ë¡œë“œ
        async function loadHome() {
            // ì „ì²´ íƒ­ í™œì„±í™”
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector('.tab[data-category="all"]').classList.add('active');
            currentCategory = 'all';
            currentPage = 1;
            
            try {
                const response = await fetch(`${API_BASE}/all-notices`);
                const data = await response.json();
                
                if (data.success) {
                    allNotices = flattenNotices(data.data);
                    displayHomeWithTeamIntro();
                }
            } catch (error) {
                document.getElementById('content').innerHTML = '<div class="loading">ì„œë²„ ì—°ê²° ì˜¤ë¥˜</div>';
            }
        }
        
        // íŒ€ ì†Œê°œì™€ ê³µì§€ì‚¬í•­ í‘œì‹œ
        function displayHomeWithTeamIntro() {
            const teamIntroHTML = `
                <div class="team-intro">
                    <img src="images/ddalkkak_logo.png" alt="ë”¸ê¹ ë¡œê³ " class="logo-large">
                    <h2>Team. ë”¸ê¹</h2>
                    <p class="subtitle">ê±´êµ­ëŒ€ ê¸€ë¡œì»¬ìº í¼ìŠ¤ ê³µì§€ì‚¬í•­ í†µí•© ì„œë¹„ìŠ¤</p>
                    <p class="description">
                        ê±´êµ­ëŒ€í•™êµ ê¸€ë¡œì»¬ìº í¼ìŠ¤ì˜ ëª¨ë“  ê³µì§€ì‚¬í•­ì„ í•œ ê³³ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ë§Œë“  ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.<br>
                        í•™ì‚¬, ì¥í•™, ì·¨ì—…, í•™ê³¼ ê³µì§€ë¥¼ ì‰½ê³  ë¹ ë¥´ê²Œ ì°¾ì•„ë³´ì„¸ìš”.
                    </p>
                    <div class="team-members">
                        <div class="member">
                            <div class="avatar">ì¡°</div>
                            <div class="name">ì¡°í˜„í˜¸</div>
                            <div class="role">Team Leader</div>
                        </div>
                        <div class="member">
                            <div class="avatar">ê¹€</div>
                            <div class="name">ê¹€ì¸ì¤€</div>
                            <div class="role">Developer</div>
                        </div>
                        <div class="member">
                            <div class="avatar">ê¹€</div>
                            <div class="name">ê¹€ìœ¤ì¬</div>
                            <div class="role">Developer</div>
                        </div>
                    </div>
                </div>
            `;
            
            displayNoticesWithIntro(allNotices, teamIntroHTML);
        }
        
        // íŒ€ ì†Œê°œì™€ í•¨ê»˜ ê³µì§€ì‚¬í•­ í‘œì‹œ
        function displayNoticesWithIntro(notices, introHTML) {
            const filteredNotices = currentCategory === 'all' ? 
                notices : notices.filter(notice => notice.category === currentCategory);
            
            if (filteredNotices.length === 0) {
                document.getElementById('content').innerHTML = introHTML + `
                    <div class="empty-state">
                        <h3>ğŸ“­ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p>í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì— ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                `;
                return;
            }

            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const paginatedNotices = filteredNotices.slice(startIndex, endIndex);
            const totalPages = Math.ceil(filteredNotices.length / itemsPerPage);

            const tableHTML = `
                <div class="main-content">
                    <div class="table-container">
                        <table>
                            <thead class="table-header">
                                <tr>
                                    <th style="width: 50%">ì œëª©</th>
                                    <th style="width: 15%">ì‘ì„±ì</th>
                                    <th style="width: 15%">ì‘ì„±ì¼</th>
                                    <th class="views" style="width: 10%">ğŸ‘ ì¡°íšŒ</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${paginatedNotices.map(notice => `
                                    <tr class="table-row" onclick="viewNotice('${notice.id}')">
                                        <td class="title">
                                            ${currentUser ? `<span class="bookmark-btn" onclick="event.stopPropagation(); toggleBookmark('${notice.id}')" id="bookmark-${notice.id}" style="cursor: pointer; margin-right: 8px; font-size: 16px;">â­</span>` : ''}
                                            ${notice.title}
                                        </td>
                                        <td class="author">${notice.department || 'ê³µì§€ì‚¬í•­'}</td>
                                        <td class="date">${notice.date || '2025-11-03'}</td>
                                        <td class="views">${notice.views}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    ${generatePagination(totalPages, filteredNotices.length)}
                </div>
            `;
            
            document.getElementById('content').innerHTML = introHTML + tableHTML;
        }

        // ê³µì§€ì‚¬í•­ í‰ë©´í™”
        function flattenNotices(data) {
            const notices = [];
            for (const [college, departments] of Object.entries(data)) {
                for (const [department, deptNotices] of Object.entries(departments)) {
                    deptNotices.forEach((notice, index) => {
                        notices.push({
                            ...notice,
                            college,
                            department,
                            id: `${college}-${department}-${index}`,
                            category: categorizeNotice(notice.title),
                            views: Math.floor(Math.random() * 500) + 50
                        });
                    });
                }
            }
            return notices.sort((a, b) => new Date(b.date || '2025-01-01') - new Date(a.date || '2025-01-01'));
        }

        // ê³µì§€ì‚¬í•­ ë¶„ë¥˜
        function categorizeNotice(title) {
            if (title.includes('ìˆ˜ê°•') || title.includes('ê°•ì˜') || title.includes('í•™ì‚¬')) return 'í•™ì‚¬ê³µì§€';
            if (title.includes('ì¥í•™')) return 'ì¥í•™ê³µì§€';
            if (title.includes('ì±„ìš©') || title.includes('ëª¨ì§‘')) return 'ì±„ìš©ê³µì§€';
            if (title.includes('ì…í•™') || title.includes('ì‹ ì…ìƒ')) return 'ì…í•™ê³µì§€';
            if (title.includes('ì·¨ì—…') || title.includes('ì°½ì—…') || title.includes('ì¸í„´')) return 'ì·¨ì—…/ì°½ì—…';
            return 'ì¼ë°˜ê³µì§€';
        }

        // ê³µì§€ì‚¬í•­ í‘œì‹œ
        function displayNotices(notices) {
            const filteredNotices = currentCategory === 'all' ? 
                notices : notices.filter(notice => notice.category === currentCategory);
            
            if (filteredNotices.length === 0) {
                document.getElementById('content').innerHTML = `
                    <div class="empty-state">
                        <h3>ğŸ“­ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p>í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì— ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                `;
                return;
            }

            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const paginatedNotices = filteredNotices.slice(startIndex, endIndex);
            const totalPages = Math.ceil(filteredNotices.length / itemsPerPage);

            const tableHTML = `
                <div class="table-container">
                    <table>
                        <thead class="table-header">
                            <tr>
                                <th style="width: 50%">ì œëª©</th>
                                <th style="width: 15%">ì‘ì„±ì</th>
                                <th style="width: 15%">ì‘ì„±ì¼</th>
                                <th class="views" style="width: 10%">ğŸ‘ ì¡°íšŒ</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${paginatedNotices.map(notice => `
                                <tr class="table-row" onclick="viewNotice('${notice.id}')">
                                    <td class="title">${notice.title}</td>
                                    <td class="author">${notice.department || 'ê³µì§€ì‚¬í•­'}</td>
                                    <td class="date">${notice.date || '2025-11-03'}</td>
                                    <td class="views">${notice.views}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                ${generatePagination(totalPages, filteredNotices.length)}
            `;
            
            document.getElementById('content').innerHTML = tableHTML;
        }

        // ê³µì§€ì‚¬í•­ ìƒì„¸ë³´ê¸°
        async function viewNotice(noticeId) {
            const notice = allNotices.find(n => n.id === noticeId);
            if (!notice) return;
            
            // ë¡œë”© í‘œì‹œ
            const loadingHTML = `
                <div style="padding: 24px;">
                    <button onclick="loadHome()" style="background: #6c757d; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-bottom: 20px;">â† ëª©ë¡ìœ¼ë¡œ</button>
                    <div style="border-bottom: 2px solid #036B3F; padding-bottom: 16px; margin-bottom: 24px;">
                        <h1 style="color: #212529; margin-bottom: 12px;">${notice.title}</h1>
                        <div style="color: #6c757d; display: flex; gap: 16px;">
                            <span>ğŸ“… ${notice.date || '2025-11-03'}</span>
                            <span>ğŸ« ${notice.department}</span>
                            <span>ğŸ‘ ${notice.views} ì¡°íšŒ</span>
                        </div>
                    </div>
                    <div style="background: #f8f9fa; padding: 24px; border-radius: 8px; margin-bottom: 24px; text-align: center;">
                        <p style="color: #495057;">ğŸ”„ ê³µì§€ì‚¬í•­ ìš”ì•½ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                    </div>
                </div>
            `;
            
            document.getElementById('content').innerHTML = loadingHTML;
            
            try {
                // ê³µì§€ì‚¬í•­ ë‚´ìš© ë° ìš”ì•½ í¬ë¡¤ë§
                const response = await fetch(`${API_BASE}/notice-content`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ url: notice.link })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    displayNoticeDetail(notice, data.summary || {});
                } else {
                    displayNoticeError(notice, 'ìš”ì•½ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
            } catch (error) {
                console.error('ê³µì§€ì‚¬í•­ ìš”ì•½ ë¡œë“œ ì‹¤íŒ¨:', error);
                displayNoticeError(notice, 'ì„œë²„ ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // ê³µì§€ì‚¬í•­ ìƒì„¸ ì •ë³´ í‘œì‹œ
        function displayNoticeDetail(notice, summary) {
            const detailHTML = `
                <div style="padding: 24px;">
                    <button onclick="loadHome()" style="background: #6c757d; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-bottom: 20px;">â† ëª©ë¡ìœ¼ë¡œ</button>
                    
                    <div style="border-bottom: 2px solid #036B3F; padding-bottom: 16px; margin-bottom: 24px;">
                        <h1 style="color: #212529; margin-bottom: 12px; font-size: 24px;">${notice.title}</h1>
                        <div style="color: #6c757d; display: flex; gap: 16px; flex-wrap: wrap;">
                            <span>ğŸ“… ${notice.date || '2025-11-03'}</span>
                            <span>ğŸ« ${notice.department}</span>
                            <span>ğŸ‘ ${notice.views} ì¡°íšŒ</span>
                        </div>
                    </div>
                    
                    ${generateSummaryHTML(summary)}
                    
                    <div style="text-align: center; margin-bottom: 24px;">
                        <button onclick="window.open('${notice.link}', '_blank')" style="background: #036B3F; color: white; border: none; padding: 16px 32px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 16px; box-shadow: 0 2px 8px rgba(3,107,63,0.3); transition: all 0.2s;" onmouseover="this.style.background='#025a33'" onmouseout="this.style.background='#036B3F'">ğŸ“„ ì›ë¬¸ ë³´ê¸°</button>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center;">
                        <p style="color: #6c757d; margin: 0; font-size: 14px;">ğŸ’¡ <strong>íŒ:</strong> ì›ë¬¸ ë§í¬ì—ì„œ ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ, ìƒì„¸ ë‚´ìš© í™•ì¸, ë¬¸ì˜ì²˜ ì •ë³´ ë“±ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
            `;
            
            document.getElementById('content').innerHTML = detailHTML;
        }
        
        // ìš”ì•½ ì •ë³´ HTML ìƒì„±
        function generateSummaryHTML(summary) {
            if (!summary || Object.keys(summary).length === 0) {
                return `
                    <div style="background: white; padding: 32px; border-radius: 12px; margin-bottom: 24px; border: 1px solid #e9ecef; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <div style="text-align: center; color: #6c757d;">
                            <p>ìš”ì•½ ì •ë³´ë¥¼ ì¶”ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì›ë¬¸ì„ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
                        </div>
                    </div>
                `;
            }
            
            let summaryHTML = `
                <div style="background: white; padding: 32px; border-radius: 12px; margin-bottom: 24px; border: 1px solid #e9ecef; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <h3 style="color: #036B3F; margin-bottom: 24px; font-size: 20px; text-align: center;">ğŸ“‹ ê³µì§€ì‚¬í•­ ìš”ì•½</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 24px;">
            `;
            
            // ë§ˆê°ì¼
            if (summary.deadline) {
                summaryHTML += `
                    <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 16px;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <span style="font-size: 18px;">â°</span>
                            <strong style="color: #856404;">ë§ˆê°ì¼</strong>
                        </div>
                        <p style="color: #856404; margin: 0; font-weight: 600;">${summary.deadline}</p>
                    </div>
                `;
            }
            
            // ì¥ì†Œ
            if (summary.location) {
                summaryHTML += `
                    <div style="background: #e3f2fd; border: 1px solid #bbdefb; border-radius: 8px; padding: 16px;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <span style="font-size: 18px;">ğŸ“</span>
                            <strong style="color: #1976d2;">ì¥ì†Œ</strong>
                        </div>
                        <p style="color: #1976d2; margin: 0;">${summary.location}</p>
                    </div>
                `;
            }
            
            // ë³´ìƒ/í˜œíƒ
            if (summary.reward) {
                summaryHTML += `
                    <div style="background: #e8f5e8; border: 1px solid #c8e6c9; border-radius: 8px; padding: 16px;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <span style="font-size: 18px;">ğŸ</span>
                            <strong style="color: #388e3c;">ë³´ìƒ/í˜œíƒ</strong>
                        </div>
                        <p style="color: #388e3c; margin: 0; font-weight: 600;">${summary.reward}</p>
                    </div>
                `;
            }
            
            // ë¹„ìš©
            if (summary.cost) {
                summaryHTML += `
                    <div style="background: #fce4ec; border: 1px solid #f8bbd9; border-radius: 8px; padding: 16px;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <span style="font-size: 18px;">ğŸ’°</span>
                            <strong style="color: #c2185b;">ë¹„ìš©</strong>
                        </div>
                        <p style="color: #c2185b; margin: 0; font-weight: 600;">${summary.cost}</p>
                    </div>
                `;
            }
            
            // ì—°ë½ì²˜
            if (summary.contact) {
                summaryHTML += `
                    <div style="background: #f3e5f5; border: 1px solid #e1bee7; border-radius: 8px; padding: 16px;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <span style="font-size: 18px;">ğŸ“</span>
                            <strong style="color: #7b1fa2;">ì—°ë½ì²˜</strong>
                        </div>
                        <p style="color: #7b1fa2; margin: 0;">${summary.contact}</p>
                    </div>
                `;
            }
            
            summaryHTML += `</div>`;
            
            // ì¤‘ìš” ë‚ ì§œë“¤
            if (summary.important_dates && summary.important_dates.length > 0) {
                summaryHTML += `
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #036B3F; margin-bottom: 12px;">ğŸ“… ì¤‘ìš” ë‚ ì§œ</h4>
                        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                            ${summary.important_dates.map(date => 
                                `<span style="background: #e3f2fd; color: #1976d2; padding: 6px 12px; border-radius: 16px; font-size: 14px;">${date}</span>`
                            ).join('')}
                        </div>
                    </div>
                `;
            }
            
            // í•µì‹¬ í¬ì¸íŠ¸
            if (summary.key_points && summary.key_points.length > 0) {
                summaryHTML += `
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #036B3F; margin-bottom: 12px;">â— í•µì‹¬ ì‚¬í•­</h4>
                        <ul style="margin: 0; padding-left: 20px; color: #495057;">
                            ${summary.key_points.map(point => `<li style="margin-bottom: 8px;">${point}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            summaryHTML += `</div>`;
            
            return summaryHTML;
        }
        
        // ì˜¤ë¥˜ í‘œì‹œ
        function displayNoticeError(notice, errorMessage) {
            const errorHTML = `
                <div style="padding: 24px;">
                    <button onclick="loadHome()" style="background: #6c757d; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-bottom: 20px;">â† ëª©ë¡ìœ¼ë¡œ</button>
                    <div style="border-bottom: 2px solid #036B3F; padding-bottom: 16px; margin-bottom: 24px;">
                        <h1 style="color: #212529; margin-bottom: 12px;">${notice.title}</h1>
                        <div style="color: #6c757d; display: flex; gap: 16px;">
                            <span>ğŸ“… ${notice.date || '2025-11-03'}</span>
                            <span>ğŸ« ${notice.department}</span>
                            <span>ğŸ‘ ${notice.views} ì¡°íšŒ</span>
                        </div>
                    </div>
                    <div style="background: #f8f9fa; padding: 24px; border-radius: 8px; margin-bottom: 24px;">
                        <p style="color: #495057; line-height: 1.6;">${errorMessage}</p>
                    </div>
                    <div style="text-align: center;">
                        <button onclick="window.open('${notice.link}', '_blank')" style="background: #036B3F; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">ğŸ“„ ì›ë¬¸ ë³´ê¸°</button>
                    </div>
                </div>
            `;
            
            document.getElementById('content').innerHTML = errorHTML;
        }
        


        // ê²€ìƒ‰ ê¸°ëŠ¥
        async function searchNotices() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) return;

            const filteredNotices = allNotices.filter(notice => 
                notice.title.toLowerCase().includes(query.toLowerCase()) ||
                notice.department.toLowerCase().includes(query.toLowerCase())
            );

            displaySearchResults(filteredNotices, query);
        }

        // ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ
        function displaySearchResults(notices, query) {
            if (notices.length === 0) {
                document.getElementById('content').innerHTML = `
                    <div class="empty-state">
                        <h3>ğŸ” ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p>"${query}"ì— ëŒ€í•œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                `;
                return;
            }

            const tableHTML = `
                <div style="padding: 20px; border-bottom: 1px solid #e9ecef;">
                    <h3>ê²€ìƒ‰ ê²°ê³¼: "${query}" (${notices.length}ê°œ)</h3>
                </div>
                <div class="table-container">
                    <table>
                        <thead class="table-header">
                            <tr>
                                <th style="width: 50%">ì œëª©</th>
                                <th style="width: 15%">ì‘ì„±ì</th>
                                <th style="width: 15%">ì‘ì„±ì¼</th>
                                <th class="views" style="width: 10%">ğŸ‘ ì¡°íšŒ</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${notices.map(notice => `
                                <tr class="table-row" onclick="viewNotice('${notice.id}')">
                                    <td class="title">${notice.title}</td>
                                    <td class="author">${notice.department}</td>
                                    <td class="date">${notice.date || '2025-11-03'}</td>
                                    <td class="views">${notice.views}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            
            document.getElementById('content').innerHTML = tableHTML;
        }

        // ì™¸ë¶€ ë§í¬ ì—´ê¸°
        function openLink(url) {
            window.open(url, '_blank');
        }

        // í˜ì´ì§€ë„¤ì´ì…˜ ìƒì„±
        function generatePagination(totalPages, totalItems) {
            if (totalPages <= 1) return '';
            
            let paginationHTML = '<div class="pagination">';
            
            // ì´ì „ ë²„íŠ¼
            paginationHTML += `<button onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>â€¹ ì´ì „</button>`;
            
            // í˜ì´ì§€ ë²ˆí˜¸ë“¤
            const startPage = Math.max(1, currentPage - 2);
            const endPage = Math.min(totalPages, currentPage + 2);
            
            for (let i = startPage; i <= endPage; i++) {
                paginationHTML += `<button onclick="changePage(${i})" class="${i === currentPage ? 'active' : ''}">${i}</button>`;
            }
            
            // ë‹¤ìŒ ë²„íŠ¼
            paginationHTML += `<button onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>ë‹¤ìŒ â€º</button>`;
            
            // í˜ì´ì§€ ì •ë³´
            paginationHTML += `<div class="page-info">${currentPage} / ${totalPages} í˜ì´ì§€ (ì´ ${totalItems}ê°œ)</div>`;
            
            paginationHTML += '</div>';
            return paginationHTML;
        }
        
        // í˜ì´ì§€ ë³€ê²½
        function changePage(page) {
            const filteredNotices = currentCategory === 'all' ? 
                allNotices : allNotices.filter(notice => notice.category === currentCategory);
            const totalPages = Math.ceil(filteredNotices.length / itemsPerPage);
            
            if (page < 1 || page > totalPages) return;
            
            currentPage = page;
            displayNotices(allNotices);
        }

        // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
        async function checkLoginStatus() {
            try {
                const response = await fetch(`${API_BASE}/user`, {
                    credentials: 'include'
                });
                const data = await response.json();
                
                if (data.success && data.logged_in) {
                    currentUser = data.user;
                    updateUserMenu(true);
                } else {
                    currentUser = null;
                    updateUserMenu(false);
                }
            } catch (error) {
                console.error('ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ ì‹¤íŒ¨:', error);
                updateUserMenu(false);
            }
        }
        
        // ì‚¬ìš©ì ë©”ë‰´ ì—…ë°ì´íŠ¸
        function updateUserMenu(isLoggedIn) {
            const userMenu = document.getElementById('userMenu');
            
            if (isLoggedIn) {
                userMenu.innerHTML = `
                    <span class="user-info" onclick="showMyPage()" style="cursor: pointer;">ğŸ‘¤ ${currentUser}ë‹˜</span>
                    <button class="auth-btn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
                `;
            } else {
                userMenu.innerHTML = `
                    <button class="auth-btn" onclick="showLoginModal()">ë¡œê·¸ì¸</button>
                `;
            }
        }
        
        // ë¡œê·¸ì¸ ëª¨ë‹¬ í‘œì‹œ
        function showLoginModal() {
            document.getElementById('loginModal').style.display = 'block';
            document.getElementById('loginError').textContent = '';
            document.getElementById('loginForm').reset();
        }
        
        // ë¡œê·¸ì¸ ëª¨ë‹¬ ìˆ¨ê¸°ê¸°
        function hideLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
        }
        
        // íšŒì›ê°€ì… ëª¨ë‹¬ í‘œì‹œ
        function showRegisterModal() {
            hideLoginModal();
            document.getElementById('registerModal').style.display = 'block';
            document.getElementById('registerError').textContent = '';
            document.getElementById('registerForm').reset();
        }
        
        // íšŒì›ê°€ì… ëª¨ë‹¬ ìˆ¨ê¸°ê¸°
        function hideRegisterModal() {
            document.getElementById('registerModal').style.display = 'none';
        }
        
        // ë¡œê·¸ì¸ ì²˜ë¦¬
        async function login(username, password) {
            try {
                const response = await fetch(`${API_BASE}/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ username, password })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    currentUser = data.user;
                    updateUserMenu(true);
                    hideLoginModal();
                    alert('ë¡œê·¸ì¸ ì„±ê³µ!');
                } else {
                    document.getElementById('loginError').textContent = data.message;
                }
            } catch (error) {
                document.getElementById('loginError').textContent = 'ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
            }
        }
        
        // ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
        async function logout() {
            try {
                const response = await fetch(`${API_BASE}/logout`, {
                    method: 'POST',
                    credentials: 'include'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    currentUser = null;
                    updateUserMenu(false);
                    alert('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨:', error);
            }
        }
        
        // íšŒì›ê°€ì… ì²˜ë¦¬
        async function register(userData) {
            try {
                const response = await fetch(`${API_BASE}/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(userData)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    hideRegisterModal();
                    alert('íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
                    showLoginModal();
                } else {
                    document.getElementById('registerError').textContent = data.message;
                }
            } catch (error) {
                document.getElementById('registerError').textContent = 'íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
            }
        }
        
        // ë¡œê·¸ì¸ í¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            login(username, password);
        });
        
        // íšŒì›ê°€ì… í¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const userData = {
                username: formData.get('username'),
                password: formData.get('password'),
                name: formData.get('name'),
                email: formData.get('email'),
                department: formData.get('department'),
                student_id: formData.get('student_id')
            };
            register(userData);
        });
        
        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ì‹œ ë‹«ê¸°
        document.getElementById('loginModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideLoginModal();
            }
        });
        
        document.getElementById('registerModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideRegisterModal();
            }
        });

        // ë§ˆì´í˜ì´ì§€ í‘œì‹œ
        async function showMyPage() {
            if (!currentUser) {
                showLoginModal();
                return;
            }
            
            try {
                const [profileResponse, bookmarksResponse] = await Promise.all([
                    fetch(`${API_BASE}/profile`, { credentials: 'include' }),
                    fetch(`${API_BASE}/bookmarks`, { credentials: 'include' })
                ]);
                
                const profileData = await profileResponse.json();
                const bookmarksData = await bookmarksResponse.json();
                
                if (profileData.success && bookmarksData.success) {
                    displayMyPage(profileData.profile, bookmarksData.bookmarks);
                }
            } catch (error) {
                console.error('ë§ˆì´í˜ì´ì§€ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }
        
        // ë§ˆì´í˜ì´ì§€ UI í‘œì‹œ
        function displayMyPage(profile, bookmarks) {
            const myPageHTML = `
                <div class="mypage">
                    <button onclick="loadHome()" style="background: #6c757d; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-bottom: 20px;">â† í™ˆìœ¼ë¡œ</button>
                    
                    <div class="profile-card">
                        <div class="profile-header">
                            <div class="profile-avatar">${profile.name ? profile.name.charAt(0) : profile.username.charAt(0).toUpperCase()}</div>
                            <div class="profile-info">
                                <h2>${profile.name || profile.username}</h2>
                                <p class="subtitle">${profile.department || 'í•™ê³¼ ì •ë³´ ì—†ìŒ'}</p>
                            </div>
                        </div>
                        
                        <div class="profile-details">
                            <div class="detail-item">
                                <div class="label">ì•„ì´ë””</div>
                                <div class="value">${profile.username}</div>
                            </div>
                            <div class="detail-item">
                                <div class="label">ì´ë©”ì¼</div>
                                <div class="value">${profile.email || 'ì´ë©”ì¼ ì •ë³´ ì—†ìŒ'}</div>
                            </div>
                            <div class="detail-item">
                                <div class="label">í•™ë²ˆ</div>
                                <div class="value">${profile.student_id || 'í•™ë²ˆ ì •ë³´ ì—†ìŒ'}</div>
                            </div>
                            <div class="detail-item">
                                <div class="label">ê°€ì…ì¼</div>
                                <div class="value">${profile.join_date || '2025-11-03'}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bookmarks-section">
                        <div class="section-header">
                            <h3>ğŸ”– ë‚´ ì¦ê²¨ì°¾ê¸° (${bookmarks.length}ê°œ)</h3>
                        </div>
                        
                        ${bookmarks.length === 0 ? `
                            <div class="empty-state">
                                <p>ì¦ê²¨ì°¾ê¸°í•œ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                                <p>ê³µì§€ì‚¬í•­ ì œëª© ì˜†ì˜ â˜† ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€í•˜ì„¸ìš”.</p>
                            </div>
                        ` : bookmarks.map(bookmark => `
                            <div class="bookmark-item">
                                <div class="bookmark-info">
                                    <div class="title">${bookmark.title}</div>
                                    <div class="meta">${bookmark.department} â€¢ ${bookmark.date} â€¢ ì¦ê²¨ì°¾ê¸° ì¶”ê°€: ${bookmark.added_date}</div>
                                </div>
                                <div class="bookmark-actions">
                                    <button class="btn-small btn-link" onclick="window.open('${bookmark.link}', '_blank')">ì›ë¬¸ë³´ê¸°</button>
                                    <button class="btn-small btn-danger" onclick="removeBookmark('${bookmark.id}')">ì‚­ì œ</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            document.getElementById('content').innerHTML = myPageHTML;
        }
        
        // ì¦ê²¨ì°¾ê¸° í† ê¸€
        async function toggleBookmark(noticeId) {
            if (!currentUser) {
                showLoginModal();
                return;
            }
            
            const notice = allNotices.find(n => n.id === noticeId);
            if (!notice) return;
            
            try {
                const response = await fetch(`${API_BASE}/bookmarks`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify(notice)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    const btn = document.getElementById(`bookmark-${noticeId}`);
                    if (btn) {
                        if (btn.classList.contains('bookmarked')) {
                            btn.textContent = 'â­';
                            btn.classList.remove('bookmarked');
                            alert('ì¦ê²¨ì°¾ê¸°ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤!');
                        } else {
                            btn.textContent = 'ğŸŒŸ';
                            btn.classList.add('bookmarked');
                            alert('ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
                        }
                    }
                }
            } catch (error) {
                console.error('ì¦ê²¨ì°¾ê¸° ì¶”ê°€ ì‹¤íŒ¨:', error);
            }
        }
        
        // ì¦ê²¨ì°¾ê¸° ì‚­ì œ
        async function removeBookmark(bookmarkId) {
            try {
                const response = await fetch(`${API_BASE}/bookmarks/${bookmarkId}`, {
                    method: 'DELETE',
                    credentials: 'include'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('ì¦ê²¨ì°¾ê¸°ì—ì„œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
                    showMyPage();
                }
            } catch (error) {
                console.error('ì¦ê²¨ì°¾ê¸° ì‚­ì œ ì‹¤íŒ¨:', error);
            }
        }

        // ì´ˆê¸°í™” ì‹¤í–‰
        init();
    </script>
</body>
</html>